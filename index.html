<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GuriangMovie - Premium Cinema Experience</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #050505; color: #e5e5e5; scroll-behavior: smooth; }
        .glass { background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(15px); border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        .sidebar-glass { background: rgba(10, 10, 10, 0.95); backdrop-filter: blur(20px); border-right: 1px solid rgba(255, 255, 255, 0.1); }
        .movie-card { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .movie-card:hover { transform: translateY(-10px) scale(1.05); z-index: 10; }
        .hero-gradient { background: linear-gradient(to top, #050505 5%, transparent 100%), linear-gradient(to right, #050505 20%, transparent 100%); }
        .custom-scroll::-webkit-scrollbar { width: 5px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #ef4444; border-radius: 10px; }
        .active-filter { color: #ef4444; font-weight: bold; border-left: 3px solid #ef4444; padding-left: 10px; }
    </style>
</head>
<body class="overflow-x-hidden">

    <div id="overlay" onclick="toggleSidebar()" class="fixed inset-0 bg-black/70 z-[140] hidden transition-opacity"></div>

    <aside id="sidebar" class="fixed left-0 top-0 h-full w-72 sidebar-glass z-[150] transition-transform -translate-x-full overflow-y-auto custom-scroll p-6">
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-xl font-extrabold text-red-600">MENU</h2>
            <button onclick="toggleSidebar()" class="text-white text-3xl">&times;</button>
        </div>

        <div class="space-y-8 pb-10">
            <section>
                <h4 class="text-xs font-bold text-gray-500 uppercase tracking-widest mb-3">üì∫ Tipe Konten</h4>
                <ul class="space-y-2 text-sm text-gray-400">
                    <li class="cursor-pointer hover:text-white" onclick="changeCategory('movie', 'trending')">Movie (Film)</li>
                    <li class="cursor-pointer hover:text-white" onclick="changeCategory('tv', 'trending')">TV Series</li>
                </ul>
            </section>

            <section>
                <h4 class="text-xs font-bold text-gray-500 uppercase tracking-widest mb-3">üé≠ Genre</h4>
                <ul id="genre-menu" class="space-y-2 text-sm text-gray-400"></ul>
            </section>

            <section>
                <h4 class="text-xs font-bold text-gray-500 uppercase tracking-widest mb-3">üåç Region</h4>
                <ul class="space-y-2 text-sm text-gray-400">
                    <li class="cursor-pointer hover:text-white" onclick="filterCountry('ID')">Indonesia</li>
                    <li class="cursor-pointer hover:text-white" onclick="filterCountry('KR')">Korea</li>
                    <li class="cursor-pointer hover:text-white" onclick="filterCountry('JP')">Jepang</li>
                    <li class="cursor-pointer hover:text-white" onclick="filterCountry('US')">USA / Hollywood</li>
                    <li class="cursor-pointer hover:text-white" onclick="filterCountry('IN')">India (Bollywood)</li>
                </ul>
            </section>

            <section>
                <h4 class="text-xs font-bold text-gray-500 uppercase tracking-widest mb-3">‚è≥ Tahun Rilis</h4>
                <ul class="space-y-2 text-sm text-gray-400">
                    <li class="cursor-pointer hover:text-white" onclick="filterYear(2020, 2026)">2020 ‚Äì Sekarang</li>
                    <li class="cursor-pointer hover:text-white" onclick="filterYear(2010, 2019)">2010 ‚Äì 2019</li>
                    <li class="cursor-pointer hover:text-white" onclick="filterYear(1900, 1989)">Klasik (Sebelum 1990)</li>
                </ul>
            </section>
        </div>
    </aside>

    <nav class="fixed top-0 w-full z-[100] glass px-6 py-4 flex justify-between items-center" id="navbar">
        <div class="flex items-center gap-6">
            <button onclick="toggleSidebar()" class="p-2 hover:bg-white/10 rounded-full transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
            <h1 class="text-2xl font-extrabold text-red-600 tracking-tighter cursor-pointer" onclick="location.reload()">GURIANG<span class="text-white">MOVIE</span></h1>
        </div>
        
        <div class="flex items-center gap-4">
            <div class="relative hidden md:block">
                <input type="text" id="search-input" onkeyup="handleSearch(event)" placeholder="Search movie or series..." class="bg-white/5 border border-white/10 rounded-full px-5 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-red-600 w-64 transition-all">
            </div>
            <button class="bg-red-600 px-5 py-2 rounded-lg font-bold text-sm hover:bg-red-700 shadow-lg shadow-red-600/20">LOGIN</button>
        </div>
    </nav>

    <section class="relative h-[85vh] w-full overflow-hidden">
        <div id="hero-bg" class="absolute inset-0 bg-cover bg-center transition-all duration-1000"></div>
        <div class="absolute inset-0 hero-gradient"></div>
        <div class="relative z-10 h-full flex flex-col justify-center px-6 md:px-20 max-w-5xl">
            <div id="hero-tag" class="bg-red-600 text-[10px] font-black px-3 py-1 rounded w-fit mb-4 tracking-widest">TRENDING</div>
            <h2 id="hero-title" class="text-5xl md:text-7xl font-extrabold mb-4 leading-tight drop-shadow-2xl text-white italic">Loading...</h2>
            <p id="hero-desc" class="text-gray-300 text-lg mb-8 line-clamp-3 max-w-2xl drop-shadow">Mencari tontonan terbaik untuk Anda hari ini.</p>
            <div class="flex gap-4">
                <button onclick="openPlayer('hero')" class="bg-white text-black px-8 py-4 rounded-xl font-black flex items-center gap-3 hover:bg-red-600 hover:text-white transition transform active:scale-95 shadow-xl">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M4.5 3.5v13l11-6.5-11-6.5z"></path></svg> WATCH NOW
                </button>
            </div>
        </div>
    </section>

    <main class="relative z-20 -mt-32 px-6 md:px-16 pb-20">
        <div class="flex justify-between items-end mb-8">
            <h3 id="section-title" class="text-2xl font-bold flex items-center gap-3">
                <span class="w-2 h-8 bg-red-600 rounded-full"></span> Trending Hari Ini
            </h3>
        </div>
        
        <div id="movie-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-8">
            <div class="h-80 bg-white/5 animate-pulse rounded-2xl"></div>
            <div class="h-80 bg-white/5 animate-pulse rounded-2xl"></div>
            <div class="h-80 bg-white/5 animate-pulse rounded-2xl"></div>
            <div class="h-80 bg-white/5 animate-pulse rounded-2xl"></div>
            <div class="h-80 bg-white/5 animate-pulse rounded-2xl"></div>
            <div class="h-80 bg-white/5 animate-pulse rounded-2xl"></div>
        </div>
    </main>

    <div id="player-modal" class="fixed inset-0 z-[200] bg-black hidden flex-col items-center justify-center">
        <button onclick="closePlayer()" class="absolute top-6 right-6 text-white/50 text-5xl hover:text-red-600 transition z-[210]">&times;</button>
        <div class="w-full h-full md:w-[90%] md:h-[85%] bg-black shadow-2xl relative">
            <iframe id="video-frame" src="" class="w-full h-full" frameborder="0" allowfullscreen></iframe>
        </div>
    </nav>

    <script>
        const API_KEY = 'd990ae75003f8688620791237f94df81';
        const IMG_URL = 'https://image.tmdb.org/t/p/original';
        const grid = document.getElementById('movie-grid');
        let heroMovieId = '';
        let currentType = 'movie';

        const genres = [
            {id: 28, name: "Action"}, {id: 12, name: "Adventure"}, {id: 16, name: "Animation"},
            {id: 35, name: "Comedy"}, {id: 80, name: "Crime"}, {id: 99, name: "Documentary"},
            {id: 18, name: "Drama"}, {id: 10751, name: "Family"}, {id: 14, name: "Fantasy"},
            {id: 27, name: "Horror"}, {id: 10749, name: "Romance"}, {id: 878, name: "Sci-Fi"}
        ];

        // --- Core Functions ---

        async function init() {
            loadGenreMenu();
            fetchContent(`${currentType}/trending`);
            const res = await fetch(`https://api.themoviedb.org/3/trending/all/day?api_key=${API_KEY}`);
            const data = await res.json();
            updateHero(data.results[0]);
        }

        async function fetchContent(endpoint, params = "") {
            grid.innerHTML = '<div class="col-span-full text-center py-20 text-gray-500">Loading contents...</div>';
            try {
                const url = `https://api.themoviedb.org/3/${endpoint}?api_key=${API_KEY}${params}`;
                const res = await fetch(url);
                const data = await res.json();
                renderGrid(data.results);
            } catch (e) { console.error(e); }
        }

        function renderGrid(list) {
            if(!list || list.length === 0) {
                grid.innerHTML = '<div class="col-span-full text-center py-20 uppercase tracking-widest">Tidak ada hasil ditemukan</div>';
                return;
            }
            grid.innerHTML = list.map(m => `
                <div class="movie-card relative group cursor-pointer" onclick="openPlayer('${m.id}', '${m.media_type || currentType}')">
                    <div class="relative overflow-hidden rounded-2xl shadow-lg border border-white/5">
                        <img src="${m.poster_path ? 'https://image.tmdb.org/t/p/w500'+m.poster_path : 'https://via.placeholder.com/500x750?text=No+Image'}" 
                             loading="lazy" class="w-full h-full object-cover">
                        <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-end p-4">
                            <button class="bg-red-600 text-white w-full py-2 rounded-lg font-bold text-xs uppercase">Play Now</button>
                        </div>
                        <div class="absolute top-3 right-3 bg-black/70 backdrop-blur-md px-2 py-1 rounded-md text-[10px] font-bold text-yellow-500 border border-yellow-500/30">
                            ‚≠ê ${m.vote_average ? m.vote_average.toFixed(1) : 'N/A'}
                        </div>
                    </div>
                    <div class="mt-3">
                        <h4 class="text-sm font-bold truncate group-hover:text-red-500 transition">${m.title || m.name}</h4>
                        <p class="text-[10px] text-gray-500 mt-1 uppercase tracking-tighter">${(m.release_date || m.first_air_date || '2024').split('-')[0]} ‚Ä¢ ${m.media_type || currentType}</p>
                    </div>
                </div>
            `).join('');
        }

        // --- UI Interactions ---

        function toggleSidebar() {
            const sb = document.getElementById('sidebar');
            const ov = document.getElementById('overlay');
            sb.classList.toggle('-translate-x-full');
            ov.classList.toggle('hidden');
        }

        function updateHero(m) {
            heroMovieId = m.id;
            currentType = m.media_type || 'movie';
            document.getElementById('hero-bg').style.backgroundImage = `url('${IMG_URL + m.backdrop_path}')`;
            document.getElementById('hero-title').innerText = m.title || m.name;
            document.getElementById('hero-desc').innerText = m.overview;
        }

        function loadGenreMenu() {
            const menu = document.getElementById('genre-menu');
            menu.innerHTML = genres.map(g => `
                <li class="cursor-pointer hover:text-white transition" onclick="filterGenre(${g.id}, '${g.name}')">${g.name}</li>
            `).join('');
        }

        // --- Filter Logic ---

        function changeCategory(type, label) {
            currentType = type;
            document.getElementById('section-title').innerHTML = `<span class="w-2 h-8 bg-red-600 rounded-full"></span> Koleksi ${type === 'movie' ? 'Film' : 'Series'}`;
            fetchContent(`discover/${type}`);
            toggleSidebar();
        }

        function filterGenre(id, name) {
            document.getElementById('section-title').innerHTML = `<span class="w-2 h-8 bg-red-600 rounded-full"></span> Genre: ${name}`;
            fetchContent(`discover/${currentType}`, `&with_genres=${id}`);
            toggleSidebar();
            window.scrollTo(0, 500);
        }

        function filterCountry(iso) {
            document.getElementById('section-title').innerHTML = `<span class="w-2 h-8 bg-red-600 rounded-full"></span> Region: ${iso}`;
            fetchContent(`discover/${currentType}`, `&with_origin_country=${iso}`);
            toggleSidebar();
            window.scrollTo(0, 500);
        }

        function filterYear(start, end) {
            document.getElementById('section-title').innerHTML = `<span class="w-2 h-8 bg-red-600 rounded-full"></span> Rilis: ${start} - ${end}`;
            const param = currentType === 'movie' ? `&primary_release_date.gte=${start}-01-01&primary_release_date.lte=${end}-12-31` : `&first_air_date.gte=${start}-01-01&first_air_date.lte=${end}-12-31`;
            fetchContent(`discover/${currentType}`, param);
            toggleSidebar();
        }

        async function handleSearch(e) {
            const query = e.target.value;
            if(query.length > 2) {
                document.getElementById('section-title').innerText = `Hasil pencarian: ${query}`;
                fetchContent(`search/multi`, `&query=${query}`);
            }
        }

        // --- Player ---

        function openPlayer(id, type = 'movie') {
            const targetId = id === 'hero' ? heroMovieId : id;
            const modal = document.getElementById('player-modal');
            const frame = document.getElementById('video-frame');
            
            // Otomatis deteksi movie atau tv series untuk provider embed
            const embedType = type === 'tv' ? 'tv' : 'movie';
            frame.src = `https://www.2embed.cc/embed/${embedType}?tmdb=${targetId}`;
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            document.body.style.overflow = 'hidden';
        }

        function closePlayer() {
            document.getElementById('player-modal').classList.add('hidden');
            document.getElementById('video-frame').src = '';
            document.body.style.overflow = 'auto';
        }

        init();
    </script>
</body>
</html>
